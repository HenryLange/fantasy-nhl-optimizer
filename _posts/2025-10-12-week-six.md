---
title: "Week 5: Tool Creation and Exploring What's Next"
date: 2025-10-12
---

Last week, I made a more realistic draft simulation, where a certain number of players were removed after every draft pick, and I also started experimenting with and setting up different functions for the tool. While a lot of this work helped me learn, it turns out that a good bit of the setup I did wasn't actually needed for the tool. Either way, it has been very informative and fun to explore, but this week was another challenging one. Before I could get going on the tool, I had to spend a few hours learning something called **Shinyapps.**

---

### What is "Shinyapps?"
That's the same question I was asking myself just this morning. When I started this project, I was very focused on the data cleaning and exploration of it. In my mind, the tool would piece itself together on R after I learned how to use lpSolve and learned to create functions. While this created great optimization within R, I learned that putting this code into a tool is a whole different task with very different code.

Shinyapps is a separate platform that allows you to turn R code into interactive web applications. It is shiny that creates sliders, dropdowns, or buttons that users can interact with to see results without having to use R themselves. When something is deployed on shinyapps, anyone with a browser and the link can access the app. 

---

### Coding in Shinyapps
Coding in Shinyapps was a very different process than usual. My code added to my original document was very limited today. Other than installing and loading new packages in R, all I had was this:
```
# adding goalie specific columns as NA
draftable_players_FOR_TOOL <- draftable_players_FOR_TOOL %>%
  mutate(
    W = NA,
    GA = NA,
    saves = NA,
    shutouts = NA
  )
# it doesn't necessarily matter that I'm getting rid of players wins since that isn't used in their projected points calculations

# add skater specific columns as NA
draftable_goalies_FOR_TOOL <- draftable_goalies_FOR_TOOL %>%
  mutate(
    G = NA,
    A = NA,
    SOG = NA,
    BLK = NA,
    powerPlayGoals = NA,
    powerPlayAssists = NA,
    shortHandedGoals = NA,
    shorthandedAssists = NA
  )

draftable_combined_FOR_TOOL <- bind_rows(draftable_players_FOR_TOOL, draftable_goalies_FOR_TOOL)

# making the actual CSV that will go into the app
write.csv(draftable_combined_FOR_TOOL, "draftable_players.csv", row.names = FALSE)

# deploy what I just made
rsconnect::deployApp('~/NHL Optimizer/Fantasy_NHL_Optimizer')
```
In this code, I am creating the combined table that will go into the app, making the CSV for that table for the app, then finally deploying the app so it can be viewed by anyone. 

### The UI

The majority of my coding happened in a new doc that is specifically a Shinyapps file, shown below.

```
ui <- fluidPage(
  
  # making rangers colors, blackhawks wouldn't look good in my opinion. too dark.
  tags$style(HTML("
    body {background-color: #FFFFFF; color: #0038A8; font-family: Arial, sans-serif;}
    
    .well {background-color: #0038A8; color: #FFFFFF; padding: 15px; border-radius: 10px;}
    .btn-primary {background-color: #CE1126; color: #FFFFFF; border-color: #CE1126;}
    
    h3, h4, h5 {color: #CE1126;}
    
    .shiny-input-container {margin-bottom: 15px;}
    
    .dataTables_wrapper .dataTables_filter input {
      border-radius: 5px;
    }
  ")),
```

Here we see ui, which means the "user interface." This is where all the code goes that is user-facing, or what they will see and interact with. In this code, I am altering the background or text colors of certain things so it isn't just straight black and white. This isn't needed, but I think it makes the tool more enjoyable and fun. Also, yes, I'm from Chicago and using Rangers colors. I think Black and red would be too dark, and I am Igor Shesterkin's biggest fan.

Also, I am very proud of what I was able to do here, shown below:
```
 # dropdown for drafted players
               selectizeInput(
                 inputId = "taken_players",
                 label = HTML("<b>Players Already Drafted</b>"),
                 choices = draftable_players$player,
                 multiple = TRUE,
                 options = list(placeholder = 'Select drafted players...')
               ),
```
This is the code that displays a drop-down box for users to enter players that have already been drafted. I was worried I wouldn't know how to create a drop-down box that could be scrolled or searched, but after watching a few videos and making a few searches, I was able to do this myself! super happy with how this part turned out.

### The Server

Next, we move into the part of shinyapps that isn't the user interface, called the server. This is where the calculations for optimization and all the actions of the different buttons happen. 

```
# server part
server <- function(input, output, session) {
  
  # reactive event that calculates projected points when button is pressed
  optimizer_results <- eventReactive(input$run_optimizer, {
  
    # ensures table is loaded if no players have been selected and entered yet
    taken <- input$taken_players
    if (is.null(taken) || length(taken) == 0) {
      taken <- character(0)
    }
    
    # removes selected players
    available <- subset(draftable_players, !(player %in% taken))
```

This just shows part of the server section, but we can see a few things. First, we have the optimizer results action that takes the inputs given from the sliders and calculates the projected points for each player based on that, which then gets returned for each player. Just under that, I made code that ensures that even if no player is selected in the "already selected" player dropdown, the optimization will still work. The last line of code just alters the "available" players by taking a subset of the main set, excluding players who are in the "taken" pool. This code in Shiny looked a little complex to me at first, but playing with it enough has helped me understand what each thing is doing

My code is over 200 lines this week, so I won't display it all. However, I just wanted to share a bit of what code I wrote this week since I have no visuals or findings to report like I usually do.

Lastly, although I said a bit of my preparation work for this week wasn't really needed, I was still able to use the code from the functions I made to calculate projected points last week. I didn't need to have a function in shinyapps, but I still needed to output calculated projected points, and I was easily able to paste the below lines of code from last week into shinyapps:
```
input$weight_G * ifelse(!is.na(G), G, 0) +
                                                     input$weight_A * ifelse(!is.na(A), A, 0) +
                                                     input$weight_SOG * ifelse(!is.na(SOG), SOG, 0) +
                                                     input$weight_BLK * ifelse(!is.na(BLK), BLK, 0) +
                                                     input$weight_PPG * ifelse(!is.na(powerPlayGoals), powerPlayGoals, 0) +
                                                     input$weight_PPA * ifelse(!is.na(powerPlayAssists), powerPlayAssists, 0) +
                                                     input$weight_SHG * ifelse(!is.na(shortHandedGoals), shortHandedGoals, 0) +
                                                     input$weight_SHA * ifelse(!is.na(shorthandedAssists), shorthandedAssists, 0)
### AND
input$weight_W * ifelse(!is.na(W), W, 0) +
                                                     input$weight_GA * ifelse(!is.na(GA), GA, 0) +
                                                     input$weight_Saves * ifelse(!is.na(saves), saves, 0) +
                                                     input$weight_SO * ifelse(!is.na(shutouts), shutouts, 0)
```

--- What's Next?

While the tool could arguably be considered finished, I still have a lot I want to do with it. It works at a very simple level, but I want to add more to make it easier to use and overall something that isn't just completed but something that’s pretty cool. Maybe I'll continue to use it or share it in the future, so there is no reason not to keep adding to it and perfecting it, or at least getting as close to whatever that is for this tool. 

That being said, I will probably step away from the weekly posts and go towards more irregular posting, only doing so when I make big additions to the tool. I think initially I will have a lot to add over these next few weeks, so I will post every change or group of changes I make, but as the tool becomes more developed, the posts will likely slow down. However, I don't think that will come very soon, so I'll touch on that again later when the time comes. For now, I will continue developing this tool and learning on the journey like I have been.

You can see my code for this week in the [code](https://henrylange.github.io/fantasy-nhl-optimizer/code/) section.

Now I will add the link to the app to this site, then, as time goes on, keep adding to it. Then, when I'm satisfied with this, I'm thinking I can transition to a project I've been waiting to do. Something financial…More on that later.








